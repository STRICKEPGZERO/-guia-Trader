<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Página de Vendas</title>
    <style>
        /* Estilização Geral */
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, black, goldenrod);
            font-family: Arial, sans-serif;
            color: white;
            text-align: center;
            overflow-x: hidden; /* Evita rolagem horizontal */
        }

        .headline {
            font-size: 2rem;
            font-weight: bold;
            color: #FFD700;
            margin: 20px 0;
        }

        .subheadline {
            font-size: 1.5rem;
            color: white;
            margin: 10px 0;
        }

        /* Centralização do Vídeo */
        .video-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            overflow: hidden;
        }

        .video-container iframe {
            width: 100%;
            max-width: 800px;
            height: 45vw; /* Ajuste proporcional para celulares */
            max-height: 450px;
            border: none;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 800px;
            height: 45vw;
            max-height: 450px;
            cursor: pointer;
            z-index: 2;
        }

        /* Botão de Ação */
        #action-button {
            display: none;
            margin: 20px auto;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            background-color: green;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
        }

        #action-button:hover {
            background-color: #006400;
        }

        /* Ajuste para Dispositivos Móveis */
        @media (max-width: 768px) {
            .headline {
                font-size: 1.5rem;
            }

            .subheadline {
                font-size: 1.2rem;
            }

            .video-container iframe {
                height: 56.25vw; /* Proporção 16:9 */
            }

            .video-overlay {
                height: 56.25vw;
            }

            #action-button {
                font-size: 1rem;
                padding: 10px 20px;
            }
        }
    </style>

    <!-- Meta Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        
        fbq('init', '3698045310456338');
        fbq('track', 'PageView');
    </script>
    <noscript>
        <img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=3698045310456338&ev=PageView&noscript=1"/>
    </noscript>
</head>

<body>
    <div class="headline">Assista o vídeo abaixo para entender como vamos te ajudar a mudar sua vida financeira para melhor.</div>
    <div class="subheadline">Você receberá um brinde ainda hoje para te fazer lucrar todos os dias.</div>
    <div class="video-container">
        <iframe id="vimeo-player" src="https://player.vimeo.com/video/1040959976?background=1&autoplay=1&loop=0&title=0&byline=0&portrait=0&muted=1" allow="autoplay; fullscreen; picture-in-picture"></iframe>
        <div class="video-overlay" id="video-overlay"></div>
    </div>
    <button id="action-button">Aperte aqui para adquirir e receber seu brinde</button>

    <script>
        const playerScript = document.createElement('script');
        playerScript.src = "https://player.vimeo.com/api/player.js";
        document.body.appendChild(playerScript);

        playerScript.onload = () => {
            const iframe = document.getElementById('vimeo-player');
            const actionButton = document.getElementById('action-button');
            const videoOverlay = document.getElementById('video-overlay');
            const player = new Vimeo.Player(iframe);

            let hasStarted = false; 
            let hasButtonAppeared = false; 
            let totalTimeOnPage = 0;
            let startTime = Date.now();
            let watchInterval;

            videoOverlay.addEventListener('click', () => {
                if (!hasStarted) {
                    hasStarted = true;
                    player.setCurrentTime(0).then(() => {
                        player.setVolume(1);
                        player.play();
                        fbq('trackCustom', 'VideoPlay');

                        watchInterval = setInterval(() => {
                            player.getCurrentTime().then(time => {
                                fbq('trackCustom', 'VideoWatchTime', { duration: Math.floor(time) });
                            });
                        }, 197000); 
                    });
                } else {
                    player.getPaused().then(isPaused => {
                        isPaused ? player.play() : player.pause();
                    });
                }
            });

            player.on('timeupdate', (data) => {
                if (hasStarted && !hasButtonAppeared && Math.floor(data.seconds) === 197) {
                    actionButton.style.display = 'block';
                    hasButtonAppeared = true;
                }
            });

            player.on('ended', () => {
                fbq('trackCustom', 'VideoCompleted');
                clearInterval(watchInterval);
            });

            actionButton.addEventListener('click', () => {
                fbq('track', 'InitiateCheckout');
                window.location.href = "https://pay.hotmart.com/E97101662J";
            });

            window.addEventListener('beforeunload', () => {
                totalTimeOnPage = Math.floor((Date.now() - startTime) / 1000);
                fbq('trackCustom', 'TotalTimeOnPage', { duration: totalTimeOnPage });
            });
        };
    </script>
</body>
</html>
